<%-include('./includes/header.ejs')  %>

</head>

<body>
  <div class="container-scroller">
    <!-- partial:../../partials/_navbar.html -->
    <%-include('./includes/headerNav.ejs')  %>


    <!-- partial -->
    <div class="main-panel">
      <div class="content-wrapper">
        <div class="row">

          <div class="col-12 grid-margin stretch-card">
            <div class="card">
              <div class="card-body">
                <h4 class="card-title">Category Management</h4>

                <form action="/admin/addcategory" class="forms-sample" method="post">
                  <div class="form-group">
                    <label for="name">Category Name:</label>
                    <input type="text" id="name" name="name" class="form-control" pattern="^[^\s]+$" title="Empty Spaces are not allowed" required>
                  </div>
                  <div class="form-group">
                    <label for="description">Category Description:</label>
                    <textarea id="description" name="description" class="form-control" pattern="^[^\s]+$" title="Empty are not allowed" required></textarea>
                  </div>
                  <div class="form-group">

                    <% if (errorMessages.length > 0) { %>
                    <div class="error alert alert-danger" role="alert">
                      <% errorMessages.forEach(function(message) { %>
                      <%= message %>
                      <% }); %>
                    </div>
                    <% } %>

                    <button type="submit" class="btn btn-primary">Add Category</button>
                  </div>
                </form>


                <!-- Category Listing Table -->
                <!-- Category Listing Table -->
                <h2 class="card-title">All categories</h2>
                <div class="table-responsive">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Category Name</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% category.forEach(category=> { %>
                      <tr>
                        <td>
                          <%= category.name %>
                        </td>
                        <td>
                          <%= category.description %>
                        </td>
                        <td>
                          <% if (category.status==="listed" ) { %>
                          <span style="color: green;">Listed</span>
                          <% } else { %>
                          <span style="color: red;">Unlisted</span>
                          <% } %>
                        </td>
                        <td>
                          <div style="margin-bottom: 5px;">
                            <a href="/admin/editcategory/<%= category._id %>" class="btn btn-sm btn-dark" style="width: 100px;">Edit</a>
                          </div>
                          <!-- <a href="/deletecategory/<%= category._id %>" -->
                          <!-- onclick="return confirm('Are you sure you want to delete this Category?');">Delete</a> -->
                          <!-- <a href="/<%= category.status === 'listed' ? 'unlistcategory' : 'listcategory' %>/<%= category._id %>"
                                onclick="return confirm('Are you sure you want to perform this action?');">
                                <%= category.status==='listed' ? 'Unlist' : 'List' %>
                              </a> -->
                          <div style="margin-bottom: 5px;">
                            <a href="/admin/<%= category.status === 'listed' ? 'unlistcategory' : 'listcategory' %>/<%= category._id %>" >
                              <button type="button" class="btn btn-sm <%= category.status === 'listed' ? 'btn-danger' : 'btn-success' %>" style="width: 100px;">
                                <%= category.status==='listed' ? 'Unlist' : 'List' %>
                              </button>
                            </a>
                          </div>
                        </td>
                      </tr>
                      <% }); %>
                    </tbody>
                  </table>
                </div>

              </div>
            </div>
            <!--  -->
          </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->
        <!-- <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Premium <a
                  href="https://www.bootstrapdash.com/" target="_blank">Bootstrap admin template</a> from
                BootstrapDash.</span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Copyright Â© 2021. All
                rights reserved.</span>
            </div>
          </footer> -->
        <%-include('./includes/footerNav.ejs')  %>
        <!-- container-scroller -->
        <!-- plugins:js -->
        <script src="../../vendors/js/vendor.bundle.base.js"></script>
        <!-- endinject -->
        <!-- Plugin js for this page -->
        <script src="../../vendors/typeahead.js/typeahead.bundle.min.js"></script>
        <script src="../../vendors/select2/select2.min.js"></script>
        <script src="../../vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>
        <!-- End plugin js for this page -->
        <!-- inject:js -->
        <script src="../../js/off-canvas.js"></script>
        <script src="../../js/hoverable-collapse.js"></script>
        <script src="../../js/template.js"></script>
        <script src="../../js/settings.js"></script>
        <script src="../../js/todolist.js"></script>
        <!-- endinject -->
        <!-- Custom js for this page-->
        <script src="../../js/file-upload.js"></script>
        <script src="../../js/typeahead.js"></script>
        <script src="../../js/select2.js"></script>
        <!-- End custom js for this page-->
</body>

</html>